<odoo>
  <data>

    <record id="view_git_organization_search" model="ir.ui.view">
        <field name="model">git.organization</field>
        <field name="arch" type="xml">
            <search>
                <field
                    name="name"
                    string="Name"
                    filter_domain="[('name', 'ilike', self)]"
                />
                <field name="service"/>

                <group expand="1" string="Group By">
                    <filter
                        string="Service"
                        name="service"
                        context="{'group_by' : 'service'}"
                    />
                    <filter
                        string="Auth"
                        name="auth_method"
                        context="{'group_by' : 'auth_method'}"
                    />
                    <filter
                        string="Partner"
                        name="partner"
                        context="{'group_by' : 'partner_id'}"
                    />
                </group>
                <separator/>
                <filter name="synchronized" string="Synchronized" domain="[['is_synchronized','=',True]]"/>
                <separator/>
                <filter name="created_today" string="Today" domain="[('create_date', '>=', context_today().strftime('%Y-%m-%d'))]" />
            </search>
        </field>
    </record>
    <!-- explicit list view definition -->

    <record model="ir.ui.view" id="view_git_organization_tree">
      <field name="model">git.organization</field>
      <field name="name">git.organization.tree</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name"/>
          <field name="service"/>
          <field name="repository_count" optional="show"/>
          <field name="branch_count" optional="show"/>
          <field name="custom_addons_count" optional="show"/>
          <field name="last_sync_date" widget="datetime" optional="show"/>
          <field name="auth_method" optional="hide"/>
          <field name="is_synchronized" widget="toggle_button" options='{"active": "Synchronized", "inactive": "Not synchronized"}' nolabel="1" optional="show"/>
        </tree>
      </field>
    </record>


    <record id="view_git_organization_form" model="ir.ui.view">
        <field name="model">git.organization</field>
        <field name="name">git.organization.form</field>
        <field name="arch" type="xml">
            <form string="Git Organization">
                <header>
                    <button
                        name="action_sync"
                        type="object"
                        string="Repositories Sync."
                        class="btn btn-primary"
                        attrs="{'invisible': [('is_synchronized', '!=', True)]}"
                        groups="catalog.group_manager"/>
                </header>
                <sheet>
                    <!-- Invisible fields -->
                    <field name="repository_count" invisible="1"/>
                    <field name="custom_addons_count" invisible="1"/>
                    <field name="branch_count" invisible="1"/>

                    <div class="oe_button_box" name="button_box">
                        <button
                            type="object"
                            name="action_view_git_repository"
                            class="oe_stat_button"
                            icon="fa-folder-o">
                            <div class="o_stat_info">
                                <field name="repository_count" class="o_stat_value" />
                                <span> Repositories</span>
                            </div>
                        </button>
                        <button
                            type="object"
                            name="action_view_git_branch"
                            class="oe_stat_button"
                            icon="fa-code-fork">
                            <div class="o_stat_info">
                                <field name="branch_count" class="o_stat_value" />
                                <span> Branches</span>
                            </div>
                        </button>
                        <button
                            type="object"
                            name="action_view_custom_addons"
                            class="oe_stat_button"
                            icon="fa-cube">
                            <div class="o_stat_info">
                                <field name="custom_addons_count" class="o_stat_value" />
                                <span> Addons</span>
                            </div>
                        </button>
                    </div>

                    <div class="oe_title">
                        <h1>
                            <field name="name" />
                        </h1>
                        <h3 class="oe_fade">
                            <field name="service" class="oe_inline" />
                        </h3>
                    </div>
                    <!-- <div class="oe_clear" /> -->

                    <group>
                      <group col="2">
                        <field name="url" widget="url"/>
                        <field name="auth_method" string="Method" widget="selection_badge"/>
                        <field name="auth_id" string="Auth"
                            groups="catalog.group_manager"
                            options="{'no_create_edit': True, 'no_open': True}"
                            attrs="{'required': [('auth_method', '=', 'private')], 'invisible': [('auth_method', '!=', 'private')]}"/>
                        <field name="is_user" widget="boolean_toggle"/>
                        <field name="is_synchronized" widget="boolean_toggle"/>
                      </group>
                      <group col="2">
                        <field name="last_sync_date" widget="datetime"/>
                        <field name="partner_id" help="If defined, partner will be apply on repository."/>
                        <field name="force_partner" widget="boolean_toggle"/>
                      </group>
                    </group>
                    <notebook>
                        <page name="extra_setting" string="Settings">
                            <group cols="4" string="Ignored Repositories">
                                <field
                                    name="exclude_names"
                                    colspan="4"
                                    nolabel="1"
                                />
                            </group>
                        </page>
                        <page name="note" string="Notes">
                            <field name="note" widget="html" nolabel="1"/>
                        </page>
                    </notebook>
                </sheet>
                <div class="o_attachment_preview"/>
                <div class="oe_chatter">
                    <field name="message_follower_ids" groups="base.group_user"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record id="view_git_organization_kanban" model="ir.ui.view">
        <field name="name">git.organization.kanban</field>
        <field name="model">git.organization</field>
        <field name="arch" type="xml">
            <kanban group_create="0" group_delete="0" group_edit="0"
                    quick_create="0" records_draggable="0" sample="0"
                    class="oe_background_grey o_kanban_dashboard o_emphasize_colors">
                <field name="name"/>
                <field name="service"/>
                <field name="icon"/>
                <field name="partner_id"/>
                <field name="last_sync_date"/>
                <field name="url"/>
                <field name="branch_count"/>
                <field name="repository_count"/>
                <field name="branch_count"/>
                <field name="custom_addons_count"/>
                <field name="is_synchronized"/>
                <field name="message_needaction_counter"/>
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_global_click">
                            <div class="row">
                                <div class="col-2">
                                    <img t-attf-src="#{record.icon.value}" t-att-title="record.name.value" t-att-alt="record.icon.value" class="o_image_40_cover float-left"/>
                                </div>
                                <div class="col-10">
                                    <div class="float-right">
                                        <i t-if="record.last_sync_date.value" class="fa fa-clock-o text-success" t-attf-aria-label="#{record.last_sync_date.value}" role="img" t-attf-title="#{record.last_sync_date.value}"></i>
                                        <i t-else="" class="fa fa-clock-o text-muted" label="Never synchronized" role="img" title="Never synchronized"></i>
                                        <i t-if="record.is_synchronized.raw_value" class="fa fa-circle-o text-success" aria-label="Synchronized" role="img" title="Synchronized"/>
                                        <i t-else="" class="fa fa-circle-o text-muted" aria-label="Not Synchronized" role="img" title="Not Synchronized"/>
                                        <!-- <i t-if="record.last_sync_date.value" class="fa fa-clock-o text-success" t-attf-aria-label="#{record.last_sync_date.value}" role="img" t-attf-title="#{record.last_sync_date.value}"></i> -->
                                    </div>
                                    <div>
                                        <strong><t t-esc="record.name.value"/></strong>
                                    </div>
                                    <div class="text-muted">
                                        <field name="partner_id"/>
                                        <!-- <span>
                                            <t t-esc="record.partner_id.value"/>
                                        </span> -->
                                    </div>
                                    <!-- <div class="text-muted">
                                        <span t-if="record.url.raw_value" t-esc="record.url.value"/>
                                    </div> -->
                                </div>
                            </div>
<!--                            <hr class="mt4 mb4"/>
                            <span class="text-left text-muted">
                                <t t-esc="record.url.value"/>
                            </span>-->
                           <!-- <hr class="mt4 mb4"/>
                            <span class="text-left text-muted">
                                <i class="fa fa-clock-o" role="img" aria-label="Date" title="Date"></i>
                                <t t-esc="record.last_sync_date.value" t-options='{"hide_seconds": True}'/>
                            </span> -->
                            <hr class="mt4 mb4"/>
                            <div class="row">
                                <div class="col-2">
                                    <!--<i class="fa fa-clock-o float-right" role="img" aria-label="Date" title="Date"/>-->
                                </div>
                                <div class="col-10">
                                    <a name="action_view_custom_addons" type="object" class="float-right">
                                        <span class="badge">
                                            <i class="fa fa-fw fa-cube"/>
                                            <t t-esc="record.custom_addons_count.value"/>
                                        </span>
                                    </a>
                                    <a name="action_view_git_branch" type="object" class="float-right">
                                        <span class="badge">
                                            <i class="fa fa-fw fa-code-fork"/>
                                            <t t-esc="record.branch_count.value"/>
                                        </span>
                                    </a>
                                    <a name="action_view_git_repository" type="object" class="float-right">
                                        <span class="badge">
                                            <i class="fa fa-fw fa-folder-o"/>
                                            <t t-esc="record.repository_count.value"/>
                                        </span>
                                    </a>

                                </div>

                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- <record model="ir.ui.view" id="view_git_organization_graph">
      <field name="model">git.organization</field>
      <field name="name">git.organization.graph</field>
      <field name="arch" type="xml">
        <graph string="Git Organization" type="bar" sample="1" stacked="False" disable_linking="1">
            <field name="name"/>
            <field name="service"/>
            <field name="repository_count" type='measure'/>
            <field name="branch_count" type='measure'/>
            <field name="custom_addons_count" type='measure'/>
        </graph>

      </field>
    </record> -->

  </data>
</odoo>